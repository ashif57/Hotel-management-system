{% extends "base.html" %}

{% block title %}Staff Dashboard - Hotel Management System{% endblock %}

{% block subtitle %}Staff Control Panel{% endblock %}

{% block breadcrumb %}
<span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
<span>Staff Dashboard</span>
{% endblock %}

{% block content %}
<!-- Welcome Section -->
<div class="card mb-4">
    <div class="card-body" style="background: linear-gradient(135deg, var(--success-color) 0%, #059669 100%); color: white; border-radius: var(--border-radius-lg);">
        <div class="d-flex align-items-center justify-content-between">
            <div>
                <h2 style="font-family: 'Poppins', sans-serif; font-size: 2rem; margin-bottom: 0.5rem;">
                    <i class="fas fa-user-tie"></i> Welcome, {{ user.name }}
                </h2>
                <p style="font-size: 1.125rem; opacity: 0.9; margin: 0;">
                    Staff Dashboard - Guest & Booking Management
                </p>
            </div>
            <div style="text-align: right;">
                <div style="background: rgba(255, 255, 255, 0.2); padding: 1rem; border-radius: var(--border-radius); backdrop-filter: blur(10px);">
                    <p style="margin: 0; font-size: 0.875rem; opacity: 0.8;">Current Shift</p>
                    <p style="margin: 0; font-size: 1.25rem; font-weight: 600;" id="currentShift">Day Shift</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Stats -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    <div class="card">
        <div class="card-body text-center">
            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--success-color), #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                <i class="fas fa-users" style="font-size: 1.25rem; color: white;"></i>
            </div>
            <h4 style="font-size: 1rem; font-weight: 600; color: var(--gray-800); margin-bottom: 0.25rem;">Today's Guests</h4>
            <p style="font-size: 1.5rem; font-weight: 700; color: var(--success-color); margin: 0;">12</p>
        </div>
    </div>

    <div class="card">
        <div class="card-body text-center">
            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--warning-color), #d97706); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                <i class="fas fa-calendar-check" style="font-size: 1.25rem; color: white;"></i>
            </div>
            <h4 style="font-size: 1rem; font-weight: 600; color: var(--gray-800); margin-bottom: 0.25rem;">Check-ins Today</h4>
            <p style="font-size: 1.5rem; font-weight: 700; color: var(--warning-color); margin: 0;">8</p>
        </div>
    </div>

    <div class="card">
        <div class="card-body text-center">
            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--info-color), #0891b2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                <i class="fas fa-sign-out-alt" style="font-size: 1.25rem; color: white;"></i>
            </div>
            <h4 style="font-size: 1rem; font-weight: 600; color: var(--gray-800); margin-bottom: 0.25rem;">Check-outs Today</h4>
            <p style="font-size: 1.5rem; font-weight: 700; color: var(--info-color); margin: 0;">5</p>
        </div>
    </div>

    <div class="card">
        <div class="card-body text-center">
            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--primary-color), var(--primary-light)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                <i class="fas fa-concierge-bell" style="font-size: 1.25rem; color: white;"></i>
            </div>
            <h4 style="font-size: 1rem; font-weight: 600; color: var(--gray-800); margin-bottom: 0.25rem;">Service Requests</h4>
            <p style="font-size: 1.5rem; font-weight: 700; color: var(--primary-color); margin: 0;">3</p>
        </div>
    </div>
</div>

<!-- Main Navigation Cards -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
    <div class="card">
        <div class="card-header" style="background: linear-gradient(135deg, var(--success-color), #059669); color: white;">
            <h3 class="card-title" style="color: white; margin: 0;">
                <i class="fas fa-users"></i> Guest Management
            </h3>
        </div>
        <div class="card-body">
            <p style="color: var(--gray-600); margin-bottom: 1.5rem;">
                Handle guest check-ins, check-outs, and manage guest information and requests.
            </p>
            <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                <a href="{{ url_for('guest.guests') }}" class="btn btn-success btn-sm">
                    <i class="fas fa-list"></i> View All Guests
                </a>
                <a href="{{ url_for('guest.add_guest') }}" class="btn btn-outline btn-sm">
                    <i class="fas fa-user-plus"></i> Add Guest
                </a>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header" style="background: linear-gradient(135deg, var(--warning-color), #d97706); color: white;">
            <h3 class="card-title" style="color: white; margin: 0;">
                <i class="fas fa-calendar-check"></i> Booking Management
            </h3>
        </div>
        <div class="card-body">
            <p style="color: var(--gray-600); margin-bottom: 1.5rem;">
                Process reservations, handle check-ins/check-outs, and manage booking status.
            </p>
            <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                <a href="{{ url_for('booking.bookings') }}" class="btn btn-sm" style="background: var(--warning-color); color: white;">
                    <i class="fas fa-list"></i> View Bookings
                </a>
                <a href="{{ url_for('booking.add_booking') }}" class="btn btn-outline btn-sm">
                    <i class="fas fa-calendar-plus"></i> New Booking
                </a>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header" style="background: linear-gradient(135deg, var(--primary-color), var(--primary-light)); color: white;">
            <h3 class="card-title" style="color: white; margin: 0;">
                <i class="fas fa-concierge-bell"></i> Service Management
            </h3>
        </div>
        <div class="card-body">
            <p style="color: var(--gray-600); margin-bottom: 1.5rem;">
                Handle guest service requests, room service, and additional amenities.
            </p>
            <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                <a href="{{ url_for('service.services') }}" class="btn btn-primary btn-sm">
                    <i class="fas fa-list"></i> View Services
                </a>
                <a href="{{ url_for('service.add_service') }}" class="btn btn-outline btn-sm">
                    <i class="fas fa-plus"></i> Add Service
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Today's Schedule -->
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">
                <i class="fas fa-calendar-day"></i> Today's Schedule
            </h3>
        </div>
        <div class="card-body">
            <div style="space-y: 1rem;">
                <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: var(--gray-50); border-radius: var(--border-radius); margin-bottom: 0.75rem; border-left: 4px solid var(--success-color);">
                    <div style="width: 40px; height: 40px; background: var(--success-color); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-sign-in-alt" style="color: white; font-size: 0.875rem;"></i>
                    </div>
                    <div style="flex: 1;">
                        <p style="margin: 0; font-weight: 500; color: var(--gray-800);">Check-in: John Doe</p>
                        <p style="margin: 0; font-size: 0.75rem; color: var(--gray-600);">Room 101 - 10:00 AM</p>
                    </div>
                    <span class="badge badge-success">Pending</span>
                </div>
                
                <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: var(--gray-50); border-radius: var(--border-radius); margin-bottom: 0.75rem; border-left: 4px solid var(--info-color);">
                    <div style="width: 40px; height: 40px; background: var(--info-color); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-sign-out-alt" style="color: white; font-size: 0.875rem;"></i>
                    </div>
                    <div style="flex: 1;">
                        <p style="margin: 0; font-weight: 500; color: var(--gray-800);">Check-out: Jane Smith</p>
                        <p style="margin: 0; font-size: 0.75rem; color: var(--gray-600);">Room 205 - 11:00 AM</p>
                    </div>
                    <span class="badge badge-info">Completed</span>
                </div>
                
                <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: var(--gray-50); border-radius: var(--border-radius); border-left: 4px solid var(--warning-color);">
                    <div style="width: 40px; height: 40px; background: var(--warning-color); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-concierge-bell" style="color: white; font-size: 0.875rem;"></i>
                    </div>
                    <div style="flex: 1;">
                        <p style="margin: 0; font-weight: 500; color: var(--gray-800);">Room Service Request</p>
                        <p style="margin: 0; font-size: 0.75rem; color: var(--gray-600);">Room 303 - Extra towels</p>
                    </div>
                    <span class="badge badge-warning">In Progress</span>
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h3 class="card-title">
                <i class="fas fa-tasks"></i> Quick Actions
            </h3>
        </div>
        <div class="card-body">
            <div style="display: grid; gap: 1rem;">
                <button class="btn btn-outline btn-lg" onclick="processCheckIn()">
                    <i class="fas fa-sign-in-alt"></i> Process Check-in
                </button>
                <button class="btn btn-outline btn-lg" onclick="processCheckOut()">
                    <i class="fas fa-sign-out-alt"></i> Process Check-out
                </button>
                <button class="btn btn-outline btn-lg" onclick="viewRoomStatus()">
                    <i class="fas fa-bed"></i> Room Status
                </button>
                <a href="{{ url_for('logout') }}" class="btn btn-secondary btn-lg">
                    <i class="fas fa-sign-out-alt"></i> End Shift
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Recent Activity -->
<div class="card">
    <div class="card-header">
        <h3 class="card-title">
            <i class="fas fa-history"></i> Recent Activity
        </h3>
    </div>
    <div class="card-body">
        <div class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Action</th>
                        <th>Guest</th>
                        <th>Room</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>09:30 AM</td>
                        <td><i class="fas fa-sign-in-alt text-success"></i> Check-in</td>
                        <td>Alice Johnson</td>
                        <td>Room 102</td>
                        <td><span class="badge badge-success">Completed</span></td>
                    </tr>
                    <tr>
                        <td>10:15 AM</td>
                        <td><i class="fas fa-concierge-bell text-warning"></i> Service Request</td>
                        <td>Bob Wilson</td>
                        <td>Room 201</td>
                        <td><span class="badge badge-warning">In Progress</span></td>
                    </tr>
                    <tr>
                        <td>11:00 AM</td>
                        <td><i class="fas fa-sign-out-alt text-info"></i> Check-out</td>
                        <td>Carol Davis</td>
                        <td>Room 105</td>
                        <td><span class="badge badge-info">Completed</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Quick action functions
function processCheckIn() {
    if (confirm('Process next scheduled check-in?')) {
        alert('Check-in process initiated for John Doe - Room 101');
        // In real application, this would redirect to check-in form
    }
}

function processCheckOut() {
    if (confirm('Process next scheduled check-out?')) {
        alert('Check-out process initiated. Please verify room condition.');
        // In real application, this would redirect to check-out form
    }
}

function viewRoomStatus() {
    alert('Room Status Overview:\n\n' +
          'Available: 15 rooms\n' +
          'Occupied: 8 rooms\n' +
          'Maintenance: 2 rooms\n' +
          'Cleaning: 3 rooms');
}

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    // Update shift info based on time
    const hour = new Date().getHours();
    const shiftElement = document.getElementById('currentShift');
    
    if (hour >= 6 && hour < 14) {
        shiftElement.textContent = 'Morning Shift';
    } else if (hour >= 14 && hour < 22) {
        shiftElement.textContent = 'Evening Shift';
    } else {
        shiftElement.textContent = 'Night Shift';
    }
    
    // Animate cards on load
    const cards = document.querySelectorAll('.card');
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'all 0.6s ease';
        
        setTimeout(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, index * 100);
    });
});
</script>
{% endblock %}
